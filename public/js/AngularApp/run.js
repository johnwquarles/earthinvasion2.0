'use strict';

angular.module('app.run', []).run(function ($rootScope, timeCard, accuracyCard, achievement) {
  $rootScope.socket = io();
  $rootScope.socket.on('time', function (data) {
    timeCard.addTime(data);
    $rootScope.$broadcast('refresh');
  });
  $rootScope.socket.on('accuracy', function (data) {
    accuracyCard.addAccuracy(data);
    $rootScope.$broadcast('refresh');
  });
  $rootScope.socket.on('achievement', function (data) {
    achievement.addAchievement(data);
    $rootScope.$broadcast('refresh');
  });
  $rootScope.socket.on('clearCards', function () {
    timeCard.clear();
    accuracyCard.clear();
    $rootScope.$broadcast('refresh');
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFuZ3VsYXJBcHAvcnVuLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsT0FBTyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLENBQzVCLEdBQUcsQ0FBQyxVQUFVLFVBQVUsRUFBRSxRQUFRLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRTtBQUM5RCxZQUFVLENBQUMsTUFBTSxHQUFHLEVBQUUsRUFBRSxDQUFDO0FBQ3pCLFlBQVUsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxVQUFVLElBQUksRUFBRTtBQUMzQyxZQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3ZCLGNBQVUsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUM7R0FDbEMsQ0FBQyxDQUFBO0FBQ0YsWUFBVSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLFVBQVUsSUFBSSxFQUFFO0FBQy9DLGdCQUFZLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQy9CLGNBQVUsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUM7R0FDbEMsQ0FBQyxDQUFBO0FBQ0YsWUFBVSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsYUFBYSxFQUFFLFVBQVUsSUFBSSxFQUFFO0FBQ2xELGVBQVcsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDakMsY0FBVSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQztHQUNsQyxDQUFDLENBQUE7QUFDRixZQUFVLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsWUFBWTtBQUM3QyxZQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDakIsZ0JBQVksQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUNyQixjQUFVLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0dBQ2xDLENBQUMsQ0FBQTtDQUNILENBQUMsQ0FBQyIsImZpbGUiOiJBbmd1bGFyQXBwL3J1bi5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhcHAucnVuJywgW10pXG4ucnVuKGZ1bmN0aW9uICgkcm9vdFNjb3BlLCB0aW1lQ2FyZCwgYWNjdXJhY3lDYXJkLCBhY2hpZXZlbWVudCkge1xuICAkcm9vdFNjb3BlLnNvY2tldCA9IGlvKCk7XG4gICRyb290U2NvcGUuc29ja2V0Lm9uKCd0aW1lJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICB0aW1lQ2FyZC5hZGRUaW1lKGRhdGEpO1xuICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgncmVmcmVzaCcpO1xuICB9KVxuICAkcm9vdFNjb3BlLnNvY2tldC5vbignYWNjdXJhY3knLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgIGFjY3VyYWN5Q2FyZC5hZGRBY2N1cmFjeShkYXRhKTtcbiAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3JlZnJlc2gnKTtcbiAgfSlcbiAgJHJvb3RTY29wZS5zb2NrZXQub24oJ2FjaGlldmVtZW50JywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICBhY2hpZXZlbWVudC5hZGRBY2hpZXZlbWVudChkYXRhKTtcbiAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3JlZnJlc2gnKTtcbiAgfSlcbiAgJHJvb3RTY29wZS5zb2NrZXQub24oJ2NsZWFyQ2FyZHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgdGltZUNhcmQuY2xlYXIoKTtcbiAgICBhY2N1cmFjeUNhcmQuY2xlYXIoKTtcbiAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3JlZnJlc2gnKTtcbiAgfSlcbn0pO1xuIl19
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJBbmd1bGFyQXBwL3J1bi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnYXBwLnJ1bicsIFtdKVxuLnJ1bihmdW5jdGlvbiAoJHJvb3RTY29wZSwgdGltZUNhcmQsIGFjY3VyYWN5Q2FyZCwgYWNoaWV2ZW1lbnQpIHtcbiAgJHJvb3RTY29wZS5zb2NrZXQgPSBpbygpO1xuICAkcm9vdFNjb3BlLnNvY2tldC5vbigndGltZScsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgdGltZUNhcmQuYWRkVGltZShkYXRhKTtcbiAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3JlZnJlc2gnKTtcbiAgfSlcbiAgJHJvb3RTY29wZS5zb2NrZXQub24oJ2FjY3VyYWN5JywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICBhY2N1cmFjeUNhcmQuYWRkQWNjdXJhY3koZGF0YSk7XG4gICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdyZWZyZXNoJyk7XG4gIH0pXG4gICRyb290U2NvcGUuc29ja2V0Lm9uKCdhY2hpZXZlbWVudCcsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgYWNoaWV2ZW1lbnQuYWRkQWNoaWV2ZW1lbnQoZGF0YSk7XG4gICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdyZWZyZXNoJyk7XG4gIH0pXG4gICRyb290U2NvcGUuc29ja2V0Lm9uKCdjbGVhckNhcmRzJywgZnVuY3Rpb24gKCkge1xuICAgIHRpbWVDYXJkLmNsZWFyKCk7XG4gICAgYWNjdXJhY3lDYXJkLmNsZWFyKCk7XG4gICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdyZWZyZXNoJyk7XG4gIH0pXG59KTtcbiJdLCJmaWxlIjoiQW5ndWxhckFwcC9ydW4uanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==